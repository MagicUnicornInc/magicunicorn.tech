import{a as e}from"./index-f92cb07f.js";import{r as t}from"./react-vendor-f16e7f43.js";import"./framer-motion-3aeaf91e.js";import"./icons-66efe12a.js";const r=t.memo(({src:r,alt:s,fallback:a="/portfolio-assets/placeholder.svg",className:n="",width:o,height:i})=>{const[c,l]=t.useState(!1),[d,f]=t.useState(!1),[m,u]=t.useState(r),[g,h]=t.useState(!1),p=t.useRef(null);return t.useEffect(()=>{if(!p.current)return;const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(f(!0),e.disconnect())})},{rootMargin:"50px"});return e.observe(p.current),()=>{e.disconnect()}},[]),t.useEffect(()=>{if(!d)return;const e=new Image;e.src=r,e.onload=()=>{l(!0),h(!1)},e.onerror=()=>{u(a),l(!0),h(!0)}},[r,a,d]),d&&c?e("img",{ref:p,src:g?a:m,alt:s,className:n,width:o,height:i,loading:"lazy",decoding:"async"}):e("div",{ref:p,className:`loading-placeholder ${n}`,style:{width:o||"100%",height:i||"200px",backgroundColor:"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center"},children:d&&"Loading..."})});r.displayName="LazyImage";export{r as default};
